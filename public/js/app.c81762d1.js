(function(t){function e(e){for(var o,n,r=e[0],l=e[1],c=e[2],d=0,v=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&v.push(i[n][0]),i[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},i={app:0},s=[];function n(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"4700c1d8","chunk-461b141f":"1bf54f36"}[t]+".js"}function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=n(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},1019:function(t,e,a){},"2bd6":function(t,e,a){},"305d":function(t,e,a){"use strict";a("3ed2")},"3ed2":function(t,e,a){},"47d6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[[a("v-list-item",{attrs:{to:"/homepage"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-title",[t._v(" Inicio ")])],1)],[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Almacén ")])],1)],1),a("v-list-item",{attrs:{to:"/categorias"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Categorías ")])],1)],1),a("v-list-item",{attrs:{to:"/articulos"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Artículos ")])],1)],1)],1)],[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Compras ")])],1)],1),a("v-list-item",{attrs:{to:"/ingreso"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Ingresos ")])],1)],1),a("v-list-item",{attrs:{to:"/proveedor"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Proveedores ")])],1)],1)],1)],[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Ventas ")])],1)],1),a("v-list-item",{attrs:{to:"/venta"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Ventas ")])],1)],1),a("v-list-item",{attrs:{to:"/cliente"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Clientes ")])],1)],1)],1)],[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Accesos ")])],1)],1),a("v-list-item",{attrs:{to:"/usuario"}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Usuarios ")])],1)],1)],1)],[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Consultas ")])],1)],1),a("v-list-item",{attrs:{to:{name:""}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Consulta Compras ")])],1)],1),a("v-list-item",{attrs:{to:{name:""}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-domain")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Consulta Ventas ")])],1)],1)],1)]],2)],1),a("v-app-bar",{attrs:{app:"",color:"blue darken-3",dark:""}},[a("v-toolbar-title",[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",{staticClass:"hidden-sm-and-down"},[t._v("Sistema")])],1),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.exit()}}},[a("v-icon",[t._v("mdi-export")]),t._v(" Salir ")],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-main",[a("BarDrawer"),a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1)],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}})},r=[],l={name:"BarDrawer",props:{},data:function(){return{drawer:!0,group:null,idShow:"",home:"homepage",admins:[["Categorías","mdi-account-multiple-outline","categorias"],["Artículos","mdi-cog-outline","articulos"]],compras:[["Ingresos","mdi-account-multiple-outline","ingresos"],["Proveedores","mdi-account-multiple-outline","proveedores"]],ventas:[["Ventas","mdi-account-multiple-outline","ventas"],["Clientes","mdi-account-multiple-outline","clientes"]],accesos:[["Usuarios","mdi-account-multiple-outline","usuarios"],["Clientes","mdi-account-multiple-outline","clientes"]],consultas:[["Consulta compras","mdi-account-multiple-outline","consultacompras"],["Consulta ventas","mdi-account-multiple-outline","consultaventas"]]}},watch:{group:function(){this.drawer=!1}},methods:{exit:function(){localStorage.setItem("user-token",null),this.$router.push("/login")}}},c=l,d=(a("cc6c"),a("2877")),u=a("6544"),v=a.n(u),m=a("7496"),h=Object(d["a"])(c,n,r,!1,null,"54bd4ca2",null),p=h.exports;v()(h,{VApp:m["a"]});var f={name:"App",components:{BarDrawer:p},data:function(){return{drawer:!1}},watch:{group:function(){this.drawer=!1}},methods:{exit:function(){localStorage.setItem("user-token",null),this.$router.push("/login")}}},b=f,x=(a("034f"),a("40dc")),g=a("5bc1"),k=a("8336"),_=a("a523"),C=a("a75b"),I=a("132d"),y=a("8860"),V=a("56b0"),A=a("da13"),D=a("1800"),T=a("5d23"),M=a("f6c4"),w=a("f774"),N=a("0789"),E=a("2fa4"),S=a("2a7f"),j=Object(d["a"])(b,i,s,!1,null,null,null),P=j.exports;v()(j,{VApp:m["a"],VAppBar:x["a"],VAppBarNavIcon:g["a"],VBtn:k["a"],VContainer:_["a"],VContent:C["a"],VIcon:I["a"],VList:y["a"],VListGroup:V["a"],VListItem:A["a"],VListItemAction:D["a"],VListItemContent:T["a"],VListItemTitle:T["b"],VMain:M["a"],VNavigationDrawer:w["a"],VSlideYTransition:N["e"],VSpacer:E["a"],VToolbarTitle:S["a"]});var O=a("f309");a("5363");o["a"].use(O["a"]);var F=new O["a"]({icons:{iconfont:"mdi"}}),L=a("2f62"),U=a("8c4f"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg5:"",xl4:""}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue darken-3"}},[a("v-toolbar-title",[t._v(" Acceso al Sistema ")])],1),a("v-card-text",[a("v-text-field",{attrs:{autofocus:"",color:"accent",label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{type:"password",color:"accent",label:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.errorM?a("v-flex",{staticClass:"red--text"},[t._v(" "+t._s(t.errorM)+" ")]):t._e()],1),a("v-card-actions",{staticClass:"px-3 pb-3"},[a("v-flex",{attrs:{"text-xs-right":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.login()}}},[t._v("Ingresar")])],1)],1)],1)],1)],1)},q=[],R=a("bc3a"),B=a.n(R),G={name:"Login",props:{},data:function(){return{email:"",password:""}},methods:{login:function(){var t=this,e={email:this.email,password:this.password};B()({url:"usuario/login",data:e,method:"POST"}).then((function(e){if(200===e.status){var a=e.data.token;t.$store.dispatch("guardarToken",e.data),localStorage.setItem("user-token",a),console.log(t.$store.state.token),t.$router.push("/homepage")}})).catch((function(t){console.log(t),localStorage.removeItem("user-token")}))}},mounted:function(){this.$nextTick((function(){var t=this,e=localStorage.getItem("user-token");B()({url:"usuario/token",method:"POST",headers:{"Content-Type":"application/json",token:e,frontend:1}}).then((function(e){200===e.status&&t.$router.push("/homepage")})).catch((function(t){console.log(t),localStorage.removeItem("user-token")}))}))}},z=G,K=(a("a92c"),a("b0af")),H=a("99d9"),W=a("0e8f"),X=a("a722"),Q=a("8654"),J=a("71d9"),Z=Object(d["a"])(z,$,q,!1,null,"5b7c047a",null),Y=Z.exports;v()(Z,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VFlex:W["a"],VLayout:X["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]});var tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-m":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("h1",[t._v("homepage")]),a("v-card",{staticClass:"mx-auto text-center",attrs:{color:"green",dark:"","max-width":"900"}},[a("v-card-text",[a("v-sheet",{attrs:{color:"rgba(0, 0, 0, .12)"}},[a("v-sparkline",{attrs:{labels:t.months,value:t.value,color:"rgba(255, 255, 255, .7)",height:"100",padding:"24","stroke-linecap":"round",smooth:""}})],1)],1),a("v-card-text",[a("div",{staticClass:"display-1 font-weight-thin"},[t._v(" Meses ")])]),a("v-divider"),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{block:"",text:""}},[t._v(" Go to Report ")])],1)],1)],1)],1)],1)},et=[],at={name:"Homepage",props:{},data:function(){return{value:[423,446,675,510,590,610,760,760,760,760,760,760],months:["1","2","3","4","5","6","7","8","9","10","11","12"]}}},ot=at,it=(a("9a63"),a("ce7e")),st=a("8dd9"),nt=a("7f2e"),rt=Object(d["a"])(ot,tt,et,!1,null,"23790cb0",null),lt=rt.exports;v()(rt,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VContainer:_["a"],VDivider:it["a"],VFlex:W["a"],VLayout:X["a"],VSheet:st["a"],VSparkline:nt["a"]});var ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-card",[a("v-card-title",[a("v-card-title",[t._v("Categorías")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ítem ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.editedItem.descripcion,callback:function(e){t.$set(t.editedItem,"descripcion",e)},expression:"editedItem.descripcion"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Estás seguro que quieres eliminar este ítem?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categoria,search:t.search,"sort-by":"nombre"},scopedSlots:t._u([{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])],a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)],1)},dt=[],ut=(a("a434"),{name:"Category",props:{},data:function(){return{search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Categoría",align:"start",sortable:!1,value:"nombre"},{text:"Descripción",value:"descripcion"},{text:"Estado",value:"estado"},{text:"Acciones",value:"actions",sortable:!1}],categoria:[],editedIndex:-1,editedItem:{nombre:"",descripcion:""},defaultItem:{nombre:"",descripcion:""},payload:"",id:0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var t=this;this.categoria=[];var e=localStorage.getItem("user-token");B()({url:"categoria/",method:"GET",headers:{"Content-Type":"application/json",token:e}}).then((function(e){200===e.status&&(console.log(e.data.categoria[0]),t.categoria=e.data.categoria,console.log(t.categoria))})).catch((function(t){console.log(t)}))},editItem:function(t){this.editedIndex=this.categoria.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.categoria.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},activarDesactivarMostrar:function(t,e){var a=this;this.editedIndex=this.categoria.indexOf(e),console.log(t);var o=localStorage.getItem("user-token"),i=this;2==t?B()({url:"categoria/desactivar/"+this.categoria[this.editedIndex]._id,method:"PUT",headers:{"Content-Type":"application/json",token:o}}).then((function(t){console.log(t.data.categoria),console.log(a.categoria),i.initialize()})).catch((function(t){console.log(t)})):1==t&&B()({url:"categoria/activar/"+this.categoria[this.editedIndex]._id,method:"PUT",headers:{"Content-Type":"application/json",token:o}}).then((function(t){console.log(t.data.categoria),console.log(a.categoria),i.initialize()})).catch((function(t){console.log(t)}))},deleteItemConfirm:function(){var t=localStorage.getItem("user-token");B()({method:"DELETE",url:"categoria/"+this.categoria[this.editedIndex]._id,headers:{"Content-Type":"application/json",token:t}}).then((function(t){console.log(t.data.categoria)})).catch((function(t){console.log(t)})),this.categoria.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){var t=this,e=localStorage.getItem("user-token");if(this.editedIndex>-1){Object.assign(this.categoria[this.editedIndex],this.editedItem),this.payload=this.categoria[this.editedIndex],this.id=this.categoria[this.editedIndex]._id;var a="categoria/"+this.id;B()({url:a,method:"PUT",headers:{"Content-Type":"application/json",token:e},data:this.payload}).then((function(e){console.log(e.data.categoria),console.log(t.categoria)})).catch((function(t){console.log(t)}))}else this.categoria.push(this.editedItem),this.payload=this.categoria[this.categoria.length-1],console.log(this.payload),console.log(this.categoria[this.editedIndex]),console.log(this.categoria),console.log(this.editedIndex),B()({method:"POST",url:"categoria/",headers:{"Content-Type":"application/json",token:e},data:this.payload}).then((function(t){console.log(t.data.categoria)})).catch((function(t){console.log(t)}));this.close()}}}),vt=ut,mt=(a("b435"),a("62ad")),ht=a("8fea"),pt=a("169a"),ft=a("0fd9"),bt=Object(d["a"])(vt,ct,dt,!1,null,"bc452da4",null),xt=bt.exports;v()(bt,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:mt["a"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VRow:ft["a"],VSpacer:E["a"],VTextField:Q["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-card",[a("v-card-title",[a("v-card-title",[t._v("Artículos")]),a("v-btn",{on:{click:function(e){return t.crearPDF()}}},[a("v-icon",[t._v("mdi-printer")])],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ítem ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Código"},model:{value:t.editedItem.codigo,callback:function(e){t.$set(t.editedItem,"codigo",e)},expression:"editedItem.codigo"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.editedItem.descripcion,callback:function(e){t.$set(t.editedItem,"descripcion",e)},expression:"editedItem.descripcion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Stock"},model:{value:t.editedItem.stock,callback:function(e){t.$set(t.editedItem,"stock",e)},expression:"editedItem.stock"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Precio"},model:{value:t.editedItem.precio,callback:function(e){t.$set(t.editedItem,"precio",e)},expression:"editedItem.precio"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Estado"},model:{value:t.editedItem.estado,callback:function(e){t.$set(t.editedItem,"estado",e)},expression:"editedItem.estado"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{hint:t.editedItem.categoria.nombre+", "+t.editedItem.categoria._id,items:t.categorias,"item-text":"nombre","item-value":"_id",label:"Categoría","persistent-hint":"","return-object":"","single-line":""},model:{value:t.editedItem.categoria,callback:function(e){t.$set(t.editedItem,"categoria",e)},expression:"editedItem.categoria"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Guardar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Estás seguro que quieres eliminar este ítem?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.articulos,search:t.search,"sort-by":"codigo"},scopedSlots:t._u([{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])],a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)],1)},kt=[],_t=(a("d81d"),a("8baf")),Ct=(a("0da4"),{name:"Articles",props:{},data:function(){return{search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Código",value:"codigo",align:"start",sortable:!0},{text:"Artículos",value:"nombre"},{text:"Categoría",value:"categoria.nombre"},{text:"Descripción",value:"descripcion"},{text:"Stock",value:"stock"},{text:"Precio",value:"precio"},{text:"Estado",value:"estado"},{text:"Acciones",value:"actions",sortable:!1}],articulos:[],categorias:[],editedIndex:-1,editedItem:{codigo:"",nombre:"",descripcion:"",categoria:[],estado:""},defaultItem:{codigo:"000",nombre:"",descripcion:"",categoria:[],estado:1},payload:"",id:0,select:{nombre:"",_id:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var t=this;this.articulos=[];var e=localStorage.getItem("user-token");B()({url:"articulo/",method:"GET",headers:{"Content-Type":"application/json",token:e}}).then((function(e){t.articulos=e.data.articulos,t.categorias=e.data.categorias,console.log(t.categorias),console.log(t.articulos)})).catch((function(t){console.log(t)}))},editItem:function(t){this.editedIndex=this.articulos.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.articulos.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},activarDesactivarMostrar:function(t,e){var a=this;this.editedIndex=this.articulos.indexOf(e),console.log(t);var o=localStorage.getItem("user-token"),i=this;2==t?B()({url:"articulo/"+this.articulos[this.editedIndex]._id,method:"PUT",headers:{"Content-Type":"application/json",token:o},data:{estado:0}}).then((function(t){console.log(t.data.categoria),console.log(a.categoria),i.initialize()})).catch((function(t){console.log(t)})):1==t&&B()({url:"articulo/"+this.articulos[this.editedIndex]._id,method:"PUT",headers:{"Content-Type":"application/json",token:o},data:{estado:1}}).then((function(t){console.log(t.data.categoria),console.log(a.categoria),i.initialize()})).catch((function(t){console.log(t)}))},deleteItemConfirm:function(){var t=this,e=localStorage.getItem("user-token");B()({method:"DELETE",url:"articulo/"+this.articulos[this.editedIndex]._id,headers:{"Content-Type":"application/json",token:e}}).then((function(e){console.log(e.data.articulos),t.initialize()})).catch((function(t){console.log(t)})),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){var t=this,e=localStorage.getItem("user-token");if(this.editedIndex>-1){Object.assign(this.articulos[this.editedIndex],this.editedItem),this.payload=this.articulos[this.editedIndex],this.id=this.articulos[this.editedIndex]._id;var a="articulo/"+this.id;B()({url:a,method:"PUT",headers:{"Content-Type":"application/json",token:e},data:this.payload}).then((function(e){console.log(e.data.articulos),console.log(t.articulos)})).catch((function(t){console.log(t)}))}else this.articulos.push(this.editedItem),this.payload=this.articulos[this.articulos.length-1],console.log(this.payload),console.log(this.articulos[this.editedIndex]),console.log(this.articulos),console.log(this.editedIndex),B()({method:"POST",url:"articulo/",headers:{"Content-Type":"application/json",token:e},data:this.payload}).then((function(){})).catch((function(t){console.log(t)}));this.close()},crearPDF:function(){var t=[{title:"Nombre",dataKey:"nombre"},{title:"Código",dataKey:"codigo"},{title:"Categoría",dataKey:"categoria"},{title:"Stock",dataKey:"stock"},{title:"Precio",dataKey:"precio"}],e=[];this.articulos.map((function(t){e.push({nombre:t.nombre,codigo:t.codigo,categoria:t.categoria.nombre,stock:t.stock,precio:t.precio})}));var a=new _t["default"]("p","pt");a.autoTable(t,e,{margin:{top:60},addPageContent:function(){a.text("Lista de Artículos",40,30)}}),a.save("Articulos.pdf")}}}),It=Ct,yt=(a("305d"),a("b974")),Vt=Object(d["a"])(It,gt,kt,!1,null,"55a89db5",null),At=Vt.exports;v()(Vt,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VCol:mt["a"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VRow:ft["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"]});var Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Ingresos")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),0==t.verNuevo?a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),a("v-spacer"),0==t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.mostrarNuevo()}}},[t._v("Nuevo")]):t._e(),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulos()}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"item.seleccionar",fn:function(e){var o=e.item;return[o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.agregarDetalle(o)}}},[t._v(" add ")])]:t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}}],null,!0)})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1),0==t.verNuevo?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ingresos,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.verIngreso(o)}}},[t._v(" mdi-tab ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])]]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)}):t._e(),t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-select",{attrs:{items:t.comprobantes,label:"Tipo Comprobante"},model:{value:t.tipocomprobante,callback:function(e){t.tipocomprobante=e},expression:"tipocomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Serie Comprobante"},model:{value:t.seriecomprobante,callback:function(e){t.seriecomprobante=e},expression:"seriecomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numcomprobante,callback:function(e){t.numcomprobante=e},expression:"numcomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[a("v-autocomplete",{attrs:{items:t.personas,label:"Proveedor"},model:{value:t.persona,callback:function(e){t.persona=e},expression:"persona"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalArticulos()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"item.borrar",fn:function(e){var o=e.item;return[[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.eliminarDetalle(t.detalles,o)}}},[t._v(" delete ")])]]}},{key:"item.cantidad",fn:function(e){var o=e.item;return[[a("v-text-field",{attrs:{type:"number"},model:{value:o.cantidad,callback:function(e){t.$set(o,"cantidad",e)},expression:"item.cantidad"}})]]}},{key:"item.subtotal",fn:function(e){var o=e.item;return[[a("v-text",{domProps:{textContent:t._s(o.precio*o.cantidad)}})]]}}],null,!0)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Parcial:")]),t._v(" $ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v(" $ "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Neto:")]),t._v(" $ "+t._s(t.total=t.calcularTotal)+" ")])]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},Tt=[],Mt={data:function(){return{dialog:!1,search:"",ingresos:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario.nombre",sortable:!0},{text:"Proveedor",value:"persona.nombre",sortable:!0},{text:"Tipo Comprobante",value:"tipocomprobante",sortable:!0},{text:"Serie comprobante",value:"seriecomprobante",sortable:!1},{text:"Número comprobante",value:"numcomprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],id:"",persona:"",personas:[],tipocomprobante:"",comprobantes:["NOTA DEBITO","FACTURA","NOTA CREDITO"],seriecomprobante:"",numcomprobante:"",impuesto:.18,codigo:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Artículo",value:"articulo",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Precio",value:"precio",sortable:!1},{text:"Sub Total",value:"subtotal",sortable:!1}],detalles:[],verNuevo:0,errorArticulo:null,total:0,totalParcial:0,totalImpuesto:0,articulos:[],texto:"",cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Código",value:"codigo",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Categoría",value:"categoria.nombre",sortable:!0},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precioventa",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],verDetalle:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t=t+this.detalles[e].cantidad*this.detalles[e].precio-this.detalles[e].descuento;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.selectPersona()},methods:{selectPersona:function(){var t=this,e=[],a={headers:{token:this.$store.state.token}};B.a.get("persona/proveedores",a).then((function(a){console.log(a.data),e=a.data.persona,e.map((function(e){t.personas.push({text:e.nombre,value:e._id})})),console.log("persona select"),console.log(t.personas)})).catch((function(t){console.log(t)}))},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={headers:{token:this.$store.state.token}};B.a.get("articulo/codigo?codigo=".concat(this.codigo),e).then((function(e){t.agregarDetalle(e.data.articulo)})).catch((function(){t.errorArticulo="No existe el artículo."}))},agregarDetalle:function(t){console.log(t),this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.push({_id:t._id,articulo:t.nombre,cantidad:1,precio:t.precioventa,descuento:0}),this.codigo="")},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},eliminarDetalle:function(t,e){console.log(t,"   /   ",e);var a=t.indexOf(e);-1!=a&&t.splice(a,1)},listarArticulos:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("articulo?query=".concat(this.texto),e).then((function(e){console.log(e.data),t.articulos=e.data.articulos})).catch((function(t){console.log(t)}))},mostrarModalArticulos:function(){this.dialog=1},listarDetalles:function(t){var e=this,a={headers:{token:this.$store.state.token}};B.a.get("ingreso/".concat(t),a).then((function(t){e.detalles=t.data.ingreso.detalles})).catch((function(t){console.log(t)}))},verIngreso:function(t){this.limpiar(),this.tipocomprobante=t.tipocomprobante,this.seriecomprobante=t.seriecomprobante,this.numcomprobante=t.numcomprobante,this.persona=t.persona._id,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.verNuevo=1,this.verDetalle=1},listar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("ingreso",e).then((function(e){t.ingresos=e.data.ingreso,console.log(e.data.ingreso)})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.tipocomprobante="",this.seriecomprobante="",this.numcomprobante="",this.impuesto=.18,this.codigo="",this.total=0,this.totalParcial=0,this.totalImpuesto=0,this.detalles=[],this.verNuevo=0,this.valida=0,this.validaMensaje=[],this.verDetalle=0},validar:function(){return this.valida=0,this.validaMensaje=[],this.persona||this.validaMensaje.push("Seleccione un proveedor."),this.tipocomprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.numcomprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0||this.impuesto>1)&&this.validaMensaje.push("Ingrese un impuesto válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle"),this.validaMensaje.length&&(this.valida=1),this.valida},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}};this.validar()||B.a.post("ingreso",{persona:this.persona,usuario:this.$store.state.usuario._id,tipocomprobante:this.tipocomprobante,seriecomprobante:this.seriecomprobante,numcomprobante:this.numcomprobante,impuesto:this.impuesto,total:this.total,detalles:this.detalles},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numcomprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("ingreso/activate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("ingreso/deactivate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},wt=Mt,Nt=a("c6a6"),Et=Object(d["a"])(wt,Dt,Tt,!1,null,null,null),St=Et.exports;v()(Et,{VAutocomplete:Nt["a"],VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]});var jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Proveedores")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Tipo Documento"},model:{value:t.tipodocumento,callback:function(e){t.tipodocumento=e},expression:"tipodocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número Documento"},model:{value:t.numdocumento,callback:function(e){t.numdocumento=e},expression:"numdocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.personas,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-check ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-block-helper ")])]]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)})],1)],1)},Pt=[],Ot={data:function(){return{dialog:!1,search:"",personas:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo Persona",value:"tipopersona",sortable:!0},{text:"Tipo Documento",value:"tipodocumento",sortable:!0},{text:"Número Documento",value:"numdocumento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],editedIndex:-1,id:"",nombre:"",tipopersona:"Proveedor",tipodocumento:"",documentos:["CC","NIT","PASAPORTE","CE"],numdocumento:"",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("persona/proveedores",e).then((function(e){t.personas=e.data.persona,console.log(e.data.persona)})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.nombre="",this.numdocumento="",this.direccion="",this.telefono="",this.email="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre de la persona debe tener entre 1-50 caracteres."),this.numdocumento.length>20&&this.validaMensaje.push("El documento no debe tener mÃ¡s de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La direcciÃ³n no debe tener mÃ¡s de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El telÃ©fono no debe tener mÃ¡s de 20 caracteres."),this.nombre.length>50&&this.validaMensaje.push("El email del usuario debe tener menos de 50 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}};this.validar()||(this.editedIndex>-1?B.a.put("persona/".concat(t.id),{_id:this.id,tipopersona:this.tipopersona,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):B.a.post("persona",{tipopersona:this.tipopersona,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},editItem:function(t){this.id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipodocumento=t.tipodocumento,this.numdocumento=t.numdocumento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("persona/activate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("persona/deactivate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},Ft=Ot,Lt=Object(d["a"])(Ft,jt,Pt,!1,null,null,null),Ut=Lt.exports;v()(Lt,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Ventas")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),0==t.verNuevo?a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),a("v-spacer"),0==t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.mostrarNuevo()}}},[t._v("Nuevo")]):t._e(),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulos()}},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"item.seleccionar",fn:function(e){var o=e.item;return[o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.agregarDetalle(o)}}},[t._v(" add ")])]:t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}}],null,!0)})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.comprobanteModal,callback:function(e){t.comprobanteModal=e},expression:"comprobanteModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[a("v-btn",{on:{click:function(e){return t.crearPDF()}}},[a("v-icon",[t._v("mdi-printer")])],1),t._v(" Reporte de venta ")],1),a("v-card-text",[a("div",{attrs:{id:"factura"}},[a("header",[a("div",{attrs:{id:"logo"}},[a("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAilBMVEX////tHCTsAAD84OHtEBrxY2bsCBXtDhntFh/sABDtEx34tLbsAAv70tP0iYzze37+8/P829z3rK795eb5vsD96+zwVFj5x8jzd3rzgIP5wsTwUVX70dL1k5bvPUPwWFzxZWnwSE3uLTT1mZvzhIbvOj/uLTP4sbPvQkfyb3P+9vbuNDr2oKL0j5G/lkIGAAAHyElEQVR4nO2dbXuiOhCGYYq8+1q1aqtotbW22///9xatPUeSwAxICOw196fdvRbJA8nMZDIJlsUwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMMwDMOU5rE/newHh+FisTzsJ9OXx0/TLaqPh+i7Z0NKHLg/BPH5r35yOI47r7P/J/EBXMe3FYRuDO7z+sV0I+9hDoGj0nYrMwDoHWemW1qVHqbvByeGJDLd1moQFZ5FAgzHpptbAbrCFBd2U9MNLk0phemYhNej6SaXpKRC2/bhvVvvsbTCs8aP9rqPz61oKyooPPfV08hI+1EiFx6Ef6qkMLU5wcSIgmJGCdh1KbRteG5dDLCKPbtGhal/bJnFWcLlydenMP2xhRElaka72K5doR28taanjt2rkHoV2mHcEr8xhd+5Uc0KU9/YihDnD/zXoroVpr+4NqIpwwBu2lO7QhuWRlTdsITb5tSv0LhJzQjUotCwxAFkG6NDodGO+geEtmhRaNDcTEFsih6Ftimn0RcFalNogxHXP3KlJKg2hX5sIoD7kFuvTaEdvjUvcBnL7dCn0A4a9xkraRDqVWg3PV8cKd6gXoU2NDsUE69xhc5zkwIjVR/VrNCGBtNTn25OG7QqtIPmkoyLKgp972dh9LJU6ikXFBHcU1MCx+o+WqDQdwHeT+voqT9+GPefovXpFUCOGDCg35DCXVhOoQf+ciVawtlq6UNOX8gj3DUjUOkK8xUGcMqLKl8WcVBKYkNO8Su3d8kKvQD2RfZhtIcyGv1XncJ+yfEUSoUJfKO/twalb825QxOL4fmvUFb4/Uj4wVkv/5lJL/FLh6Qs+aNQoZBIBHm2S77Fql45Cp4LGlNVoTXbUEdjqD12y/WFdym0rC21p4Luio1lkQu7Q6F1IEp0h/WJUVLYjnsUWt9EiVCbFiVSeq0+hWLyNfcmeh1GUjhZuE+htSWZGyepSYuSUfFjvlOhtSE5Da2T/YJ4hqBwPFkmu80uWU5y7OFMmRuR7qKzm26LZ7RFCtMoG2LX8X3fcdM/LZTRePEwv+L0dMmzEEtapHC1EWZKLmxU0UmPEqNqtKZyHp+mcPYMcjDrq2pmZpSXqDHHv0eMXY7CI6g7t6NYcVkT7Gmw16Zwjtg6tcICPwcD6X8TXmI416YQy5wpFS4KI1kpWb8n2FNPl8AH7PmqFCKRivQW1dl04SJd0XeE3VyhEPGgCu+Wl6q8IdblEQfYvWWFBNsohigv+CWuPHzroTgoVSqc40lvR7QbNppHDXWFpuitJYVPJPf2lL2ocAp6wbf1CPxEmysp/KCE0uFH9qKiTNDvjfRsl3osrRCLgX4vyybrKWOXksMrD95eUeGQlrUXExOv6EDUtICBB/6iQmoCLchedkLDb03Z/QnqiwWFhXm5zHVZD47HprGexVIs7pYU4o9E3WA0stAVe6MOX1R4oC6euYfMdbiP0eTy8QYLCslr3MKsHTdpwiOpC9wyCuMpdyVVRFj5xMevprQwHhIL73BDXcb2N5nr0DmM7eqpkPr33yFhHGYdcefGIcGWZmPoztlS3B8KM9PO+UO8wUG2ILtzMQ0el3pC0VLX4lLcAPjv2Su6NrfA54dizqVr80N8ji9VSnRsjk9IEbnC9paO5WmsBH0jvi9egq8leWKuzTeXa8NdvrQs1LF8Ke6J5ZC4WzlvigePxUpEpIhEKu0zum5hESyjHE8NC9eepEkCHhumkbougej64aXN0lUFb1FRnGl2/ZDyfAN5s2CUuwYsjyfDa8AEM6csd5nNFeWVIczbt45P6UK2p3JWTx9SLcbHk+L/Efyn3so2pJ7m2gClLe8Pg3M9TeiH53qaYKiMnVHfckZrPQ2pBbllWePJobfb7HqH3Joo2s/rrIlC6tquVN4O+Uara9O6OQhdBr4QbCv9eBtqE4nd1IYquTBilbDuDQnUQt7ysTGxgFZ3jTBh8nZtR9m3SK7z1n3CAj1/ti31u+2p1S/cb5GhzCFIs7f27LegZFF+G0O2Ce3aM1O070lqTkJ5jbOkXfueqA7jgkfYu/bdur1rhITtDQGsO7f/kFZufqsxfw/pqZS+5g5WIK98XvHAGU6lfcDToVOmf55pah8wNVl/y3kv93Z9vO7lPq6371B2m7Pd4F5u61S+cekYcm7246sP+EZobj++NSo3euqiwTMVrGP5fno/zZ4WNS9pI2pAWt/QC20PVq00fVRUSad4P82fSTts9i3GBs4W3NR69gyCs8EbVDuzoIpPq4YfGDlwt0JoUxUzZ+6Vm0fdJ9DYxy/2zUgEfWtNKNQM4H0C9RQiEilc4K1JoO5jIkxLNC1Qe0c120V/0GpuTBqZ/4kUW9HroSVnsqeuH/1sVTWcoCXn6p8PQdIRhseb1nwbwdJiUk0fxi4yjeud9Xtxy75RcqmZqVGgqtbGPMegSpJRhRu0xIaKjE70VbIC2vu9p5T+7m7f6MOuscx2Jaavd2n04bV1FkYi+qrcV0P46saHHlfPFVZdzqs3zw0sYdfEeAk5NaV5dPAbllFCF5nK6+R3SGdRDyDAxuTlW7JRG/07jZf93IHYDVX21T9/D9ibd/t7wBfG0SBRf9N5EHVs6BXx+fNd7uVwOFwO/rXvcjMMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzAMwzTGXxaidiHpPPEhAAAAAElFTkSuQmCC",id:"imagen"}})]),a("div",{attrs:{id:"datos"}},[a("p",{attrs:{id:"encabezado"}},[a("b",[t._v("IncanatoIT")]),a("br"),t._v("Adsi, Centro Agroturistico"),a("br"),t._v("Telefono:(+51)931742904"),a("br"),t._v("Email:laempresa@gmail.com ")])]),a("div",{attrs:{id:"fact"}},[a("p",[t._v(" "+t._s(t.tipocomprobante)),a("br"),t._v(" "+t._s(t.seriecomprobante)+"-"+t._s(t.numcomprobante)),a("br"),t._v(" "+t._s(t.fecha)+" ")])])]),a("br"),a("section",[a("div",[a("table",{attrs:{id:"facliente"}},[a("tbody",[a("tr",[a("td",{attrs:{id:"cliente"}},[a("strong",[t._v("Sr(a). "+t._s(t.persona.nombre))]),a("br"),a("strong",[t._v("Documento:")]),t._v(" "+t._s(t.persona.num_documento)),a("br"),a("strong",[t._v("Dirección:")]),t._v(" "+t._s(t.persona.direccion)),a("br"),a("strong",[t._v("Teléfono:")]),t._v(" "+t._s(t.persona.telefono)),a("br"),a("strong",[t._v("Email:")]),t._v(" "+t._s(t.persona.email)+" ")])])])])])]),a("br"),a("section",[a("div",[a("table",{attrs:{id:"facarticulo"}},[a("thead",[a("tr",{attrs:{id:"fa"}},[a("th",[t._v("CANT")]),a("th",[t._v("DESCRIPCION")]),a("th",[t._v("PRECIO UNIT")]),a("th",[t._v("DESC.")]),a("th",[t._v("PRECIO TOTAL")])])]),a("tbody",t._l(t.detalles,(function(e){return a("tr",{key:e._id},[a("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.cantidad))]),a("td",[t._v(t._s(e.articulo))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.precio))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.descuento))]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.cantidad*e.precio-e.descuento)+" ")])])})),0),a("tfoot",[a("tr",[a("th"),a("th"),a("th"),a("th",{staticStyle:{"text-align":"right"}},[t._v("SUBTOTAL")]),a("th",{staticStyle:{"text-align":"right"}},[t._v(" $ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" ")])]),a("tr",[a("th"),a("th"),a("th"),a("th",{staticStyle:{"text-align":"right"}},[t._v(" IVA("+t._s(t.impuesto)+"%) ")]),a("th",{staticStyle:{"text-align":"right"}},[t._v(" $ "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")])]),a("tr",[a("th"),a("th"),a("th"),a("th",{staticStyle:{"text-align":"right"}},[t._v("TOTAL")]),a("th",{staticStyle:{"text-align":"right"}},[t._v(" $ "+t._s(t.total=t.calcularTotal)+" ")])])])])])]),a("br"),a("br"),a("footer",[a("div",{attrs:{id:"gracias"}},[a("p",[a("b",[t._v("Gracias por su compra!")])])])])])]),a("v-card-actions",[a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(e){return t.ocultarComprobante()}}},[t._v("Cancelar")])],1)],1)],1)],1),0==t.verNuevo?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ventas,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.verventa(o)}}},[t._v("mdi-pencil ")]),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.mostrarComprobante(o)}}},[t._v(" mdi-printer")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])]]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)}):t._e(),t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-select",{attrs:{items:t.comprobantes,label:"Tipo Comprobante"},model:{value:t.tipocomprobante,callback:function(e){t.tipocomprobante=e},expression:"tipocomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Serie Comprobante"},model:{value:t.seriecomprobante,callback:function(e){t.seriecomprobante=e},expression:"seriecomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.numcomprobante,callback:function(e){t.numcomprobante=e},expression:"numcomprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[a("v-autocomplete",{attrs:{items:t.personas,label:"Cliente"},model:{value:t.persona,callback:function(e){t.persona=e},expression:"persona"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalArticulos()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-actions":""},scopedSlots:t._u([{key:"item.borrar",fn:function(e){var o=e.item;return[[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.eliminarDetalle(t.detalles,o)}}},[t._v(" delete ")])]]}},{key:"item.cantidad",fn:function(e){var o=e.item;return[[a("v-text-field",{attrs:{type:"number"},model:{value:o.cantidad,callback:function(e){t.$set(o,"cantidad",e)},expression:"item.cantidad"}})]]}},{key:"item.descuento",fn:function(e){var o=e.item;return[[a("v-text-field",{attrs:{type:"number"},model:{value:o.descuento,callback:function(e){t.$set(o,"descuento",e)},expression:"item.descuento"}})]]}},{key:"item.subtotal",fn:function(e){var o=e.item;return[[a("v-text",{domProps:{textContent:t._s(o.precio*o.cantidad-o.descuento)}})]]}}],null,!0)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Parcial:")]),t._v(" $ "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Impuesto:")]),t._v(" $ "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")]),a("v-flex",{staticClass:"text-xs-right"},[a("strong",[t._v("Total Neto:")]),t._v(" $ "+t._s(t.total=t.calcularTotal)+" ")])]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},qt=[],Rt=a("c0e9"),Bt=a.n(Rt),Gt={data:function(){return{dialog:!1,search:"",ventas:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario.nombre",sortable:!0},{text:"Cliente",value:"persona.nombre",sortable:!0},{text:"Tipo Comprobante",value:"tipocomprobante",sortable:!0},{text:"Serie comprobante",value:"seriecomprobante",sortable:!1},{text:"Número comprobante",value:"numcomprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],id:"",persona:"",personas:[],tipocomprobante:"",comprobantes:["NOTA DEBITO","FACTURA","NOTA CREDITO"],seriecomprobante:"",numcomprobante:"",impuesto:.18,codigo:"",cabeceraDetalles:[{text:"Borrar",value:"borrar",sortable:!1},{text:"Artículo",value:"articulo",sortable:!1},{text:"Cantidad",value:"cantidad",sortable:!1},{text:"Precio",value:"precio",sortable:!1},{text:"Descuento",value:"descuento",sortable:!1},{text:"Sub Total",value:"subtotal",sortable:!1}],detalles:[],verNuevo:0,errorArticulo:null,total:0,totalParcial:0,totalImpuesto:0,articulos:[],texto:"",cabeceraArticulos:[{text:"Seleccionar",value:"seleccionar",sortable:!1},{text:"Código",value:"codigo",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Categoría",value:"categoria.nombre",sortable:!0},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precioventa",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],verDetalle:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",comprobanteModal:0,fecha:null}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t=t+this.detalles[e].cantidad*this.detalles[e].precio-this.detalles[e].descuento;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.selectPersona()},methods:{crearPDF:function(){var t=document.getElementById("factura");Bt()(t).then((function(t){var e=t.toDataURL("image/png"),a=210,o=295,i=t.height*a/t.width,s=i,n=new _t["default"]("p","mm","a4"),r=0;n.addImage(e,"PNG",0,r,a,i),s-=o;while(s>=0)r=s-i,n.addPage(),n.addImage(e,"PNG",0,r,a,i),s-=o;n.save("ComprobanteVenta.pdf")}))},mostrarComprobante:function(t){this.limpiar(),this.tipocomprobante=t.tipocomprobante,this.seriecomprobante=t.seriecomprobante,this.numcomprobante=t.numcomprobante,this.fecha=t.createdAt,this.persona=t.persona,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.comprobanteModal=1},ocultarComprobante:function(){this.comprobanteModal=0},selectPersona:function(){var t=this,e=[],a={headers:{token:this.$store.state.token}};B.a.get("persona/clientes",a).then((function(a){e=a.data.persona,e.map((function(e){t.personas.push({text:e.nombre,value:e.id})}))})).catch((function(t){console.log(t)}))},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={headers:{token:this.$store.state.token}};B.a.get("articulo/codigo?codigo=".concat(this.codigo),e).then((function(e){t.agregarDetalle(e.data.articulo)})).catch((function(){t.errorArticulo="No existe el artículo."}))},agregarDetalle:function(t){console.log(t),this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.push({_id:t._id,articulo:t.nombre,cantidad:1,precio:t.precioventa,descuento:0}),this.codigo="")},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},eliminarDetalle:function(t,e){console.log(t,"   /   ",e);var a=t.indexOf(e);-1!=a&&t.splice(a,1)},listarArticulos:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("articulo?query=".concat(this.texto),e).then((function(e){console.log(e.data),t.articulos=e.data.articulo})).catch((function(t){console.log(t)}))},mostrarModalArticulos:function(){this.dialog=1},listarDetalles:function(t){var e=this,a={headers:{token:this.$store.state.token}};B.a.get("venta/".concat(t),a).then((function(t){e.detalles=t.data.venta.detalles})).catch((function(t){console.log(t)}))},verventa:function(t){this.limpiar(),this.tipocomprobante=t.tipocomprobante,this.seriecomprobante=t.seriecomprobante,this.numcomprobante=t.numcomprobante,this.persona=t.persona._id,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.verNuevo=1,this.verDetalle=1},listar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("venta",e).then((function(e){t.ventas=e.data.venta,console.log("response.data.venta"),console.log(e.data.venta)})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.tipocomprobante="",this.seriecomprobante="",this.numcomprobante="",this.impuesto=.18,this.codigo="",this.total=0,this.totalParcial=0,this.totalImpuesto=0,this.detalles=[],this.verNuevo=0,this.valida=0,this.validaMensaje=[],this.verDetalle=0},validar:function(){return this.valida=0,this.validaMensaje=[],this.persona||this.validaMensaje.push("Seleccione un Cliente."),this.tipocomprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.numcomprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0||this.impuesto>1)&&this.validaMensaje.push("Ingrese un impuesto válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle"),this.validaMensaje.length&&(this.valida=1),this.valida},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}};this.validar()||B.a.post("venta",{persona:this.persona,usuario:this.$store.state.usuario._id,tipocomprobante:this.tipocomprobante,seriecomprobante:this.seriecomprobante,numcomprobante:this.numcomprobante,impuesto:this.impuesto,total:this.total,detalles:this.detalles},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.numcomprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("venta/activate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("venta/deactivate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},zt=Gt,Kt=Object(d["a"])(zt,$t,qt,!1,null,null,null),Ht=Kt.exports;v()(Kt,{VAutocomplete:Nt["a"],VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]});var Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Tipo Documento"},model:{value:t.tipodocumento,callback:function(e){t.tipodocumento=e},expression:"tipodocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número Documento"},model:{value:t.numdocumento,callback:function(e){t.numdocumento=e},expression:"numdocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.personas,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])]]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)})],1)],1)},Xt=[],Qt={data:function(){return{dialog:!1,search:"",personas:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo Persona",value:"tipopersona",sortable:!0},{text:"Tipo Documento",value:"tipodocumento",sortable:!0},{text:"Número Documento",value:"numdocumento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],editedIndex:-1,id:"",nombre:"",tipopersona:"Cliente",tipodocumento:"",documentos:["CC","NIT","PASAPORTE","CE"],numdocumento:"",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.get("persona/clientes",e).then((function(e){t.personas=e.data.persona})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.nombre="",this.numdocumento="",this.direccion="",this.telefono="",this.email="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre de la persona debe tener entre 1-50 caracteres."),this.numdocumento.length>20&&this.validaMensaje.push("El documento no debe tener mÃ¡s de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La direcciÃ³n no debe tener mÃ¡s de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El telÃ©fono no debe tener mÃ¡s de 20 caracteres."),this.nombre.length>50&&this.validaMensaje.push("El email del usuario debe tener menos de 50 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this,e={headers:{token:this.$store.state.token}};this.validar()||(this.editedIndex>-1?B.a.put("persona/".concat(t.id),{_id:this.id,tipopersona:this.tipopersona,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})):B.a.post("persona",{tipopersona:this.tipopersona,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},editItem:function(t){this.id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipodocumento=t.tipodocumento,this.numdocumento=t.numdocumento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("persona/activate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={headers:{token:this.$store.state.token}};B.a.put("persona/deactivate/".concat(this.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},Jt=Qt,Zt=Object(d["a"])(Jt,Wt,Xt,!1,null,null,null),Yt=Zt.exports;v()(Zt,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]});var te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Usuarios")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"mdi-magnify",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},o),[t._v("Nuevo")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.roles,label:"Rol"},model:{value:t.rol,callback:function(e){t.rol=e},expression:"rol"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-select",{attrs:{items:t.documentos,label:"Tipo Documento"},model:{value:t.tipodocumento,callback:function(e){t.tipodocumento=e},expression:"tipodocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Número Documento"},model:{value:t.numdocumento,callback:function(e){t.numdocumento=e},expression:"numdocumento"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Teléfono"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" EstÃ¡s a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",flat:"flat"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarios,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),o.estado?[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-block-helper ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" mdi-check ")])]]}},{key:"item.estado",fn:function(e){var o=e.item;return[o.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)})],1)],1)},ee=[],ae={name:"usuario",data:function(){return{dialog:!1,search:"",usuarios:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Rol",value:"rol",sortable:!0},{text:"Tipo Documento",value:"tipodocumento",sortable:!0},{text:"Número Documento",value:"numdocumento",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],editedIndex:-1,id:"",nombre:"",rol:"",roles:["ADMIN_ROL","ALMACENISTA_ROL","VENDEDOR_ROL"],tipodocumento:"",documentos:["CC","RUP","PASAPORTE","CE"],numdocumento:"",direccion:"",telefono:"",email:"",password:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo registro":"Editar registro"}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar()},methods:{listar:function(){var t=this,e={headers:{"x-token":this.$store.state.token}};B.a.get("usuario",e).then((function(e){t.usuarios=e.data.usuarios})).catch((function(t){console.log(t)}))},limpiar:function(){this.id="",this.nombre="",this.numdocumento="",this.direccion="",this.telefono="",this.email="",this.password="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.rol||this.validaMensaje.push("Seleccione un rol."),(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre del usuario debe tener entre 1-50 caracteres."),this.numdocumento.length>20&&this.validaMensaje.push("El documento no debe tener más de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La dirección no debe tener más de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El teléfono no debe tener más de 20 caracteres."),(this.email.length<1||this.email.length>50)&&this.validaMensaje.push("El email del usuario debe tener entre 1-50 caracteres."),this.editedIndex<=-1&&(this.password.length<1||this.password.length>64)&&this.validaMensaje.push("El password del usuario debe tener entre 1-64 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},guardar:function(){var t=this,e={headers:{"x-token":this.$store.state.token}};this.validar()||(console.log("control"),this.editedIndex>-1?(console.log("control"),B.a.put("usuario/".concat(t.id),{_id:this.id,rol:this.rol,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))):B.a.post("usuario",{rol:this.rol,nombre:this.nombre,tipodocumento:this.tipodocumento,numdocumento:this.numdocumento,direccion:this.direccion,telefono:this.telefono,email:this.email,password:this.password},e).then((function(){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)})))},editItem:function(t){this.id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipodocumento=t.tipodocumento,this.numdocumento=t.numdocumento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={headers:{"x-token":this.$store.state.token}};B.a.put("usuario/activate/".concat(t.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={headers:{"x-token":this.$store.state.token}};B.a.put("usuario/deactivate/".concat(t.adId),{},e).then((function(){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},oe=ae,ie=Object(d["a"])(oe,te,ee,!1,null,null,null),se=ie.exports;v()(ie,{VBtn:k["a"],VCard:K["a"],VCardActions:H["a"],VCardText:H["b"],VCardTitle:H["c"],VContainer:_["a"],VDataTable:ht["a"],VDialog:pt["a"],VDivider:it["a"],VFlex:W["a"],VIcon:I["a"],VLayout:X["a"],VSelect:yt["a"],VSpacer:E["a"],VTextField:Q["a"],VToolbar:J["a"],VToolbarTitle:S["a"]}),o["a"].config.productionTip=!1,B.a.defaults.baseURL="http://localhost:5000/api/",o["a"].use(U["a"]);var ne=[{path:"/",redirect:"/login"},{path:"/login",component:Y},{path:"/homepage",component:lt},{path:"/categorias",component:xt},{path:"/articulos",component:At},{path:"/ingreso",component:St},{path:"/proveedor",component:Ut},{path:"/venta",component:Ht},{path:"/cliente",component:Yt},{path:"/usuario",component:se}],re=new U["a"]({mode:"history",routes:ne});o["a"].use(L["a"]);var le=new L["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.usuario=e}},actions:{guardarToken:function(t,e){var a=t.commit;console.log("data"),console.log(e.token),a("setToken",e.token),a("setUsuario",e.usuario),localStorage.setItem("token",e.token)},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("token");a&&e("setToken",a),re.push("/")},salir:function(t){var e=t.commit;e("setToken",null),e("setUsuario",null),localStorage.removeItem("token"),re.push("/login")}},modules:{}});new o["a"]({vuetify:F,router:re,store:le,render:function(t){return t(P)}}).$mount("#app")},"85ec":function(t,e,a){},"9a63":function(t,e,a){"use strict";a("47d6")},a92c:function(t,e,a){"use strict";a("1019")},b435:function(t,e,a){"use strict";a("fd67")},cc6c:function(t,e,a){"use strict";a("2bd6")},fd67:function(t,e,a){}});
//# sourceMappingURL=app.c81762d1.js.map